![[../../img/Pasted image 20231205092106.png]]

> 通过阅读代码，发现在feildMixn.js文件中`handleButtonWidgetClick`，手动触发按钮的点击事件
> 
> 通过自己添加的buttonType属性来控制相关的按钮的触发类型，结合js文件来筛选对应的方法集合。

# 添加新属性buttonType
在extension文件夹，新建`button-widget-loader.js`和`button-extension.js`

### button-widget-loader.js
~~~js
import * as PERegister from '@/components/form-designer/setting-panel/propertyRegister'
import * as PEFactory from '@/components/form-designer/setting-panel/property-editor-factory'

export function initButtonFields() {
    let buttonToolType = [
        {label: '新建', value: 'new'},
        {label: '保存', value: 'save'},
        {label: '返回', value: 'return'},
        {label: '删除', value: 'delete'},
    ]
    console.log('执行了添加按钮类型的数据');
    // buttonType 是在options的参数
    let toolButtonType = PEFactory.createSelectEditor('buttonType', 'extension.buttons.toolType', {optionItems: buttonToolType})
    PERegister.registerCPEditor('buttonType', 'button-buttonType-editor', toolButtonType)
}
~~~
注册新的buttonType属性，其中涉及到两个方法，是`createSlectEditor`和`registerCPEditor`。`createSelectEditor`是`setting-panel --> property-editor-factory.js`文件中的方法。


